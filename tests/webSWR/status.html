<!DOCTYPE html>
<html><head>
<meta charset="UTF-8"/>
<style>
table {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
}

td {
  border: 1px solid #ddd;
  padding: 8px;
}

tbody tr:hover {background-color: #ddd;}

thead {
  padding-top: 12px;
  padding-bottom: 20px;
  text-align: left;
  background-color: #4CAF50;
  color: white;
}

tbody {
  padding-top: 12px;
  padding-bottom: 20px;
  text-align: left;
  background-color: ##f2f2f2;
  color: black;
}
</style>
<title>Hello from Mbed</title>
</head>
<body>
    <h1>Mbed Webserver Status</h1>
    <script>
    function createTable(id, jsonString, titles) {
        var table1 = document.createElement("TABLE");
        table1.id = id;

        for(var k in jsonString)
        {
            var row = table1.insertRow(0);
            {
                var cell = row.insertCell(0);
                cell.innerHTML = k;
                cell = row.insertCell(1);
                cell.innerHTML = jsonString[k];
            }
        }

        var header = table1.createTHead();
        row = header.insertRow(0);    
        cell = row.insertCell(0);
        cell.innerHTML = titles[0];         
        cell = row.insertCell(1);
        cell.innerHTML = titles[1];    

        document.body.appendChild(table1);  
    };

    var reqMem = new XMLHttpRequest();
    reqMem.responseType = 'json';
    reqMem.open('GET', '/stats/mem', true);
    reqMem.onload  = function(e) {
        var jsonResponse = reqMem.response;
        createTable("memtab", jsonResponse, ["<b>RAM</b>", "<b>Bytes</b>"]);
    };
    reqMem.send(null);

    var reqCPU = new XMLHttpRequest();
    reqCPU.responseType = 'json';
    reqCPU.open('GET', '/stats/cpu', true);
    reqCPU.onload  = function(e) {
        var jsonResponse = reqCPU.response;
        createTable("cpustats", jsonResponse, ["<b>Time</b>", "<b>[s]</b>"]);
    };
    reqCPU.send(null);
    </script>
</body>
</html>
